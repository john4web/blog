<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  The Singleton Pattern - A code smell? Â· gersti.at
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Johannes Gerstbauer">
<meta name="description" content="Article explaining the Singleton Design Pattern by Gang of Four.">
<meta name="keywords" content="blog, developer, software, engineer">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="The Singleton Pattern - A code smell?"/>
<meta name="twitter:description" content="Article explaining the Singleton Design Pattern by Gang of Four."/>

<meta property="og:title" content="The Singleton Pattern - A code smell?" />
<meta property="og:description" content="Article explaining the Singleton Design Pattern by Gang of Four." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gersti.at/posts/singleton-pattern/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-01-01T00:00:00+00:00" />




<link rel="canonical" href="https://gersti.at/posts/singleton-pattern/">


<link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.e1bdf152d93b060b06ba5d496486ed9c201a8b95d335e035beb5faebe3b61cad.css" integrity="sha256-4b3xUtk7BgsGul1JZIbtnCAai5XTNeA1vrX66&#43;O2HK0=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      gersti.at
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about/">About</a>
            </li>
          
        
        
          
          
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="/de/posts/singleton-pattern/">ðŸ‡©ðŸ‡ª</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://gersti.at/posts/singleton-pattern/">
              The Singleton Pattern - A code smell?
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-01-01T00:00:00Z">
                January 1, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              4-minute read
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <p>This blog post offers an explanation of Singleton Design Pattern by Gang of Four. The examples are written in Java.</p>
<figure><img src="/images/singleton-pattern/singleton-comic.png"
         alt="A comic depicting the Singleton Pattern (Source: Refactoring-Guru). Singleton ensures that there is only ONE single instance of an object. Clients may not even realize that theyâ€™re working with the same object all the time."/><figcaption>
            <p>A comic depicting the Singleton Pattern (Source: <a href="https://refactoring.guru/design-patterns/singleton"  class="external-link" target="_blank" rel="noopener">Refactoring-Guru</a>). Singleton ensures that there is only ONE single instance of an object. Clients may not even realize that theyâ€™re working with the same object all the time.</p>
        </figcaption>
</figure>

<h1 id="intent">
  Intent
  <a class="heading-link" href="#intent">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>The original GoF Design Pattern book defines the Singleton Pattern as follows: <strong>Ensure a class only has one instance, and provide a global point of access to it.</strong></p>
<p>In other words:</p>
<p>The Singleton pattern is used when you want to create <strong>only a single instance</strong> of a class. The goal is to prevent the creation of multiple instances of the same class.</p>
<p>You have a class and singleton pattern helps you to make it impossible to instantiate that class except for a single time and whenever you want an instance, you would inevitably have to use that instance. Whenever you ask for an instance, you always get the same instance.</p>
<p>Many people argue that Singleton is an &ldquo;anti pattern&rdquo; or &ldquo;code smell&rdquo;. But why?</p>
<h1 id="main-critique-points">
  Main critique points:
  <a class="heading-link" href="#main-critique-points">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<ol>
<li>
<p>Singletons are globals and it is important to avoid globals in software engineering. Because whenever something is globally accessible, it is difficult to control and it might change without you knowing it. Anybody in the whole program could change it.</p>
</li>
<li>
<p>&ldquo;The wrong assumption&rdquo;: You are assuming that in the future you are only ever ever need a single instance of that particular class. That is not necessarily true. Especially when your applications are growing.</p>
</li>
</ol>
<p>It is completely fine to only have a single object of a class within your application. But its not fine to make it impossible to create a second instance. Because you don&rsquo;t know if you (at some point) will need a second instance.</p>
<p>There is an interesting <a href="https://www.youtube.com/watch?v=-FRm3VPhseI"  class="external-link" target="_blank" rel="noopener">Google TechTalk</a> by MiÅ¡ko Hevery (who is the creator of the AngularJS framework btw.) about Singletons and their global state. In his talk, he describes that Singletons are really a nightmare and justifies his opinion with code examples. To sum up the talk:</p>
<ul>
<li>Singletons make your code untestable.</li>
<li>Each Singleton generates an infinite number of additional global variables because everything that is accessible to a global variable is global as well.</li>
</ul>
<p>I also agree with these opinions and consider the singleton pattern more as a code smell than a pattern that should actually be used. However, let&rsquo;s take a look at the pattern in detail:</p>
<h1 id="pattern">
  Pattern
  <a class="heading-link" href="#pattern">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Singleton</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">instance</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">(){</span> <span class="o">...</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="o">.</span><span class="na">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">instance</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Additional functionalities will be added here,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// for which the Singleton class is responsible.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>The constructor is private, meaning that no instance can be created from outside the class.</p>
<p>The static method <code>getInstance()</code> can be called externally. On the first call, it creates a new Singleton instance. To ensure that this single instance is always used, it is stored in the static variable <code>instance</code>.</p>
<p>In the <code>main</code> method, you can then do the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Singleton</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Singleton</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
</span></span></code></pre></div><h1 id="reference">
  Reference
  <a class="heading-link" href="#reference">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<h2 id="video">
  Video
  <a class="heading-link" href="#video">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>Video from Christopher Okhravi: <em>Singleton Pattern â€“ Design Patterns (ep 6)</em>, URL: <a href="https://www.youtube.com/watch?v=hUE_j6q0LTQ"  class="external-link" target="_blank" rel="noopener">https://www.youtube.com/watch?v=hUE_j6q0LTQ</a>, Last Access: 14th October 2024.</li>
</ul>
<h2 id="books">
  Books
  <a class="heading-link" href="#books">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>
<p>Erich Gamma, Richard Helm, Ralph Johnson and John Vlissides: <em>Design Patterns â€“ Elements of Reusable Object-Oriented Software</em>, Publisher: Addison-Wesley, Year: 1995, ISBN: 0201633612</p>
</li>
<li>
<p>Eric Freeman, Elisabeth Robson, Kathy Sierra and Bert Bates: <em>Head First Design Patterns: Building Extensible and Maintainable Object-Oriented Software 2nd Edition</em>, Publisher: O&rsquo;REILLY, Year: 2021, ISBN: 9781492078005</p>
</li>
</ul>
<h2 id="website">
  Website
  <a class="heading-link" href="#website">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>Refactoring Guru Website: <em>Singleton</em>, URL: <a href="https://refactoring.guru/design-patterns/singleton"  class="external-link" target="_blank" rel="noopener">https://refactoring.guru/design-patterns/singleton</a>, Last Access: 14th October 2024.</li>
</ul>
<h2 id="talk">
  Talk
  <a class="heading-link" href="#talk">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>Google TechTalk by MiÅ¡ko Hevery: <em>The Clean Code Talks: Global State and Singletons</em>, Talk-Date: November 13, 2008, URL: <a href="https://www.youtube.com/watch?v=-FRm3VPhseI"  class="external-link" target="_blank" rel="noopener">https://www.youtube.com/watch?v=-FRm3VPhseI</a>, Last Access: 14th October 2024.</li>
</ul>

      </div>


      <footer>
        


        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    Â©
    
    2024
     Johannes Gerstbauer 
    Â·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
