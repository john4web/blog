<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  NULL: The Billion Dollar Mistake · gersti.at
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Johannes Gerstbauer">
<meta name="description" content="The downsides of using NULL-References explained">
<meta name="keywords" content="blog, developer, software, engineer">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="NULL: The Billion Dollar Mistake"/>
<meta name="twitter:description" content="The downsides of using NULL-References explained"/>

<meta property="og:title" content="NULL: The Billion Dollar Mistake" />
<meta property="og:description" content="The downsides of using NULL-References explained" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gersti.at/todo/billion-dollar-mistake/" /><meta property="article:section" content="TODO" />
<meta property="article:published_time" content="2024-11-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-11-26T00:00:00+00:00" />




<link rel="canonical" href="https://gersti.at/todo/billion-dollar-mistake/">


<link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.e1bdf152d93b060b06ba5d496486ed9c201a8b95d335e035beb5faebe3b61cad.css" integrity="sha256-4b3xUtk7BgsGul1JZIbtnCAai5XTNeA1vrX66&#43;O2HK0=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      gersti.at
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about/">About</a>
            </li>
          
        
        
          
          
          
            
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="/de/">🇩🇪</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container page">
  <article>
    <header>
      <h1 class="title">
        <a class="title-link" href="https://gersti.at/todo/billion-dollar-mistake/">
          NULL: The Billion Dollar Mistake
        </a>
      </h1>
    </header>

    <h2 id="overview">
  Overview
  <a class="heading-link" href="#overview">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>This blog article explores the keyword <code>null</code>, a staple in every programmer&rsquo;s daily work. Should we reconsider the use of null references in our software? Could encountering <code>null</code> in our code actually be harmful? This article aims to address these questions and provide insight into the implications of using <code>null</code>.</p>
<figure><img src="/images/billion-dollar-mistake/oppenheimer.webp"
         alt="Robert Oppenheimer&amp;rsquo;s regret over inventing the atomic bomb serves as a fitting analogy for Tony Hoare&amp;rsquo;s regret over introducing the null reference (Image-Source: Movie: Oppenheimer (2023) by Christoph Nolan)."/><figcaption>
            <p>Robert Oppenheimer&rsquo;s regret over inventing the atomic bomb serves as a fitting analogy for Tony Hoare&rsquo;s regret over introducing the null reference (Image-Source: Movie: <a href="https://en.wikipedia.org/wiki/Oppenheimer_%28film%29"  class="external-link" target="_blank" rel="noopener">Oppenheimer (2023) by Christoph Nolan</a>).</p>
        </figcaption>
</figure>

<p>To understand why <code>null</code> exists at all, we must travel back to 1965, when the null reference was invented by Tony Hoare. In a renowned lecture in 2009, while accepting the Turing Award, Hoare famously referred to the creation of null references as his <em>&ldquo;billion-dollar mistake&rdquo;</em>:</p>
<blockquote>
<p>I call it my billion-dollar mistake. It was the invention of the null reference in 1965. At that time, I was designing the first comprehensive type system for references in an object oriented language (ALGOL W). My goal was to ensure that all use of references should be absolutely safe, with checking performed automatically by the compiler. But I couldn&rsquo;t resist the temptation to put in a null reference, simply because it was so easy to implement. This has led to innumerable errors, vulnerabilities, and system crashes, which have probably caused a billion dollars of pain and damage in the last forty years.<!-- raw HTML omitted -->
— <!-- raw HTML omitted --><a href="https://web.archive.org/web/20090628071208/http://qconlondon.com/london-2009/speaker/Tony&#43;Hoare"  class="external-link" target="_blank" rel="noopener">Tony Hoare</a><!-- raw HTML omitted --></p>
</blockquote>
<p>Null references are a common source of software errors, such as null pointer exceptions, which can cause system crashes and security issues. When Tony Hoare introduced null references, his motivation was practical: it seemed like a simple way to indicate that a reference didn&rsquo;t have a valid value. However, this seemingly straightforward choice has had lasting consequences, resulting in decades of costly bug fixes and the need for complex security measures. Looking back, Hoare expressed regret for his decision, admitting that he couldn&rsquo;t have foreseen the problems it would create. Today, his opinion on null references is clear:</p>
<blockquote>
<p>Null references have been a historically bad idea.<!-- raw HTML omitted -->
— <!-- raw HTML omitted --><a href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare"  class="external-link" target="_blank" rel="noopener">Tony Hoare</a><!-- raw HTML omitted --></p>
</blockquote>
<h2 id="the-luminaries-opinion">
  The luminaries opinion
  <a class="heading-link" href="#the-luminaries-opinion">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Who is Tony Hoare? Tony Hoare is a British computer scientist who gained widespread recognition for his contributions to the field. He is best known for creating the <em>Quicksort algorithm</em>, one of the most efficient sorting methods, and <em>Hoare logic</em>, which allows the correctness of algorithms to be proven. He also developed a process algebra that influenced programming languages like Ada, Occam, and Go. In 1980, Hoare received the <a href="https://en.wikipedia.org/wiki/Turing_Award"  class="external-link" target="_blank" rel="noopener">Turing Award</a>, often referred to as the &ldquo;Nobel Prize of Computer Science&rdquo;, for his work on the definition and design of programming languages.</p>
<figure><img src="/images/billion-dollar-mistake/hoare.jpg"
         alt="Sir Charles Antony Richard Hoare" width="30%"/><figcaption>
            <p>Sir Charles Antony Richard Hoare</p>
        </figcaption>
</figure>

<p>Why do I mention all of this? Because when a luminary in computer science like Tony Hoare declares, that null references are a bad idea, it carries significant weight — particularly given that he himself was the one who introduced them. And he is not alone in his opinion. As Hoare noted in his <a href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/"  class="external-link" target="_blank" rel="noopener">Turing Award lecture</a>, Edsger W. Dijkstra also regarded null references as a bad idea.</p>
<figure><img src="/images/billion-dollar-mistake/dijkstra.jpg"
         alt="Edsger Wybe Dijkstra" width="30%"/><figcaption>
            <p>Edsger Wybe Dijkstra</p>
        </figcaption>
</figure>

<p>Dijkstra was another luminary in the field of computer science. He was a pioneer of structured programming and famous for the <em>Dijkstra&rsquo;s algorithm</em>. In 1972, he received the Turing Award as well. Dijkstra used humor to illustrate the problem with null references in programming. In a metaphor, he described objects as bachelors and <code>null</code> as a person: <em>&ldquo;If you have a null reference, then every bachelor who you represent in your object structure will seem to be married polyandrously to the same person Null&rdquo;</em>.</p>
<p>If you search the internet, you&rsquo;ll find many people who view the use of null references as bad coding practice. One of them is <a href="https://www.yegor256.com/about-me.html"  class="external-link" target="_blank" rel="noopener">Yegor Bugayenko</a>. In his <a href="https://www.youtube.com/watch?v=o3aNJX7AP3M"  class="external-link" target="_blank" rel="noopener">video on null references</a>, Yegor presents insightful, practical code examples that highlight the issues associated with working with null values, while also offering effective solutions. The following chapters summarize Yegor Bugayenko&rsquo;s video and his perspectives on null references:</p>
<h2 id="nine-reasons-to-avoid-null-references">
  Nine reasons to avoid null references
  <a class="heading-link" href="#nine-reasons-to-avoid-null-references">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The following code snippet shows a method that fetches an employee object from a database:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>If the database does not find the employee, the method returns <code>null</code> instead of returning an instance of <code>Employee</code>.
This is terribly wrong! Why?</p>
<p><strong>1. Because it may cause many nullpointer exceptions in the code.</strong></p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">getByName</span><span class="o">(</span><span class="s">&#34;Jeffrey&#34;</span><span class="o">).</span><span class="na">salary</span><span class="o">();</span>
</span></span></code></pre></div><p>If there is no employee with the name &ldquo;Jeffrey&rdquo; in the database, then the above code throws a nullpointer exception.</p>
<p>There is no such thing as:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kc">null</span><span class="o">.</span><span class="na">salary</span><span class="o">();</span>
</span></span></code></pre></div><p><strong>2. Because it is technically difficult to trace the causes of nullpointer exceptions.</strong></p>
<p>Most of the time, there is a lack of context in stack traces. Usually, the stack trace points to the line where the nullpointer exception happened but not to the specific variable or expression that was <code>null</code>. Modern programs with complex and nested code structures, with delayed execution and with lambdas make it even harder to debug.</p>
<p><strong>3. Because null references destroy our trust to the objects we are working with.</strong></p>
<p>When not using null in our code, we can trust, that objects will be objects. We can trust that they will look like objects and they will behave like objects. But when we are using null references in our code, then we cannot trust our objects anymore. We can not rely on objects to be self sufficient anymore.</p>
<p>Let&rsquo;s assume, we have a method that claims to return an object. When we now call this method and suddenly it returns something that is not an object, then our entire thinking is changed. Then we don&rsquo;t know anymore what is <code>null</code> and what is not <code>null</code>. Then we start to suspect all the objects that they are not objects anymore, even though they might actually still be. We suspect all the variables and everything that we are working with that it is not good enough. We cannot know whether we can &ldquo;touch&rdquo; the variables or not because they could be <code>null</code> and then the code breaks if we try to access them. In this way objects are not real objects anymore and they are not following the contract we are expecting.</p>
<p><strong>4. Because you have to insert countless null checks in your code.</strong></p>
<p>The previously mentioned trust issues bring another disadvantage: You <strong>always</strong> have to check if variables are <code>null</code> before you can do something with them to avoid NullpointerExceptions. You have to add those null-checks <strong>everywhere</strong> to make sure that your program works reliable. In this way, the code base grows and grows and the methods and classes become longer and longer. The code becomes cluttered, unclear and hard to understand/maintain. This is the opposite of the &ldquo;Clean Code&rdquo; approach!</p>
<p><strong>5. Because null references violate the core idea of encapsulation.</strong></p>
<p>Null references violate encapsulation by exposing internal states indirectly and making external code responsible for handling the consequences. This undermines the very essence of objects being self-contained and reliable entities. With proper encapsulation, objects manage their behavior internally and provide meaningful defaults or throw specific exceptions if something goes wrong. Returning null avoids this responsibility, leaving the caller to guess what went wrong or what to do next.</p>
<p>When a method can return null instead of an actual object, the calling code must explicitly check for null to avoid exceptions. This shifts the responsibility of managing the object&rsquo;s internal state to the external code. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">someMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">(</span><span class="n">obj</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">.</span><span class="na">doSomething</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Handle null case
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></div><p>Instead of encapsulating behavior, the caller has to manage an exceptional case (null) that ideally should have been handled inside the object.</p>
<p><strong>6. Because null references are completely against the object oriented paradigm.</strong></p>
<p>Null references breaks encapsulation and trust in objects. In OOP, objects should model Real-World Concepts. <code>Null</code> however, don’t represent anything meaningful in the real world. For instance, an object like Car represents a car, but <code>null</code> doesn’t represent &ldquo;no car&rdquo; in an intuitive way — it’s simply the absence of a reference. It even contradicts polymorphism which is a cornerstone of OOP. Polymorphism is allowing objects to define their behavior through interfaces and inheritance. Null references subvert polymorphism because null has no behavior. Developers can&rsquo;t rely on the polymorphic behavior of an object. When null is introduced, it often leads to procedural-style code, with if-statements checking for null scattered throughout the codebase. This undermines the OO principle of objects interacting through well-defined methods, making the code less modular and harder to maintain.</p>
<p><strong>7. Because <code>null</code> is an ancient concept that originated in low-level programming languages.</strong></p>
<p><code>null</code> was originally introduced for languages that used pointers like <a href="https://en.wikipedia.org/wiki/C_%28programming_language%29"  class="external-link" target="_blank" rel="noopener">C</a> for instance. However when programming in Java, we are not thinking about pointers and memory. Instead, we are dealing with objects and references. In <em>&ldquo;Object-Thinking&rdquo;</em>, you think about objects as &ldquo;living organisms&rdquo; or &ldquo;creatures&rdquo;. It is about objects and the messages you send to them and their reaction they send to you. But <code>null</code> does not have any reaction since it is no object!</p>
<p><strong>8. Because a lot of viruses are designed to exploit null references.</strong></p>
<p>Those viruses hope, that some software forgets to check the null references and that they can reach that part in the program.</p>
<p><strong>9. Because null spreads like a disease</strong></p>
<p>It is a disease in the entire application. If we allow it to enter our software, then it grows and eventually will infect the entire code.
There is only black and white. There is no grey color in between. If you use null, then the code is wrong and needs to be refactored. If you do not use null, then the code is clean.</p>
<p><strong>Yegor&rsquo;s conclusion:</strong> <em>Null references are really bad and they have to be avoided at all cost</em>.</p>
<h2 id="three-possible-alternatives-to-null-references">
  Three possible alternatives to null references
  <a class="heading-link" href="#three-possible-alternatives-to-null-references">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>However what should we use instead of null references? Yegor presents three alternatives:</p>
<p><strong>Alternative #1: Throw an Exception instead of returning <code>null</code>:</strong></p>
<p>Given the above example, you could simply throw your own exception:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;I&#39;m sorry, but the employee is not found&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>Yegor&rsquo;s suggestion of throwing an exception also reminds me on the principle <em>&ldquo;Crash Early!&rdquo;</em>, which was formulated in the book <em><a href="https://en.wikipedia.org/wiki/The_Pragmatic_Programmer"  class="external-link" target="_blank" rel="noopener">The Pragmatic Programmer</a></em> (on page 120-121). When your code encounters something that should have been impossible, the program is no longer reliable. Anything it does after that point becomes questionable, so it’s better to stop it as soon as possible. A program that has crashed, typically causes less harm than one that continues to run in a broken state.</p>
<p><strong>Alternative #2: Return a Null-Object instead of <code>null</code>:</strong></p>
<p>You could use the so-called <em>&ldquo;Null Object Design Pattern&rdquo;</em>. Given the above example, this solution could look like that:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">NoEmployee</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>In this case, the class NoEmployee could implement the same interface as Employee but in a different way than the Employee.</p>
<p>So how does the null object pattern work?</p>
<figure><img src="/images/billion-dollar-mistake/null-pattern.svg"
         alt="Components of Null Object Design Pattern. The Client depends on the DependencyBase. The Dependency and the NullDependency implement this interface in different ways. Source: geeksforgeeks.org"/><figcaption>
            <p>Components of Null Object Design Pattern. The Client depends on the <code>DependencyBase</code>. The <code>Dependency</code> and the <code>NullDependency</code> implement this interface in different ways. Source: <a href="https://www.geeksforgeeks.org"  class="external-link" target="_blank" rel="noopener">geeksforgeeks.org</a></p>
        </figcaption>
</figure>

<p>A code-example of this pattern in action:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Animal</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">makeSound</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Dog</span> <span class="kd">implements</span> <span class="n">Animal</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">makeSound</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;woof!&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NullAnimal</span> <span class="kd">implements</span> <span class="n">Animal</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">makeSound</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// do nothing
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>wenn du gerade mit Animal Objekten arbeitest aber es gerade kein animal gibt, kannst du anstatt null einfach ein Null-Animal verwenden. Dieses repräsentiert the absence of the animal und macht einfach nichts (siehe methode makeSound()). Das hat den goßen vorteil, dass durch diesen code keine nullpointer exception ausgelöst wird. Nun könnte man natürlich auch in ind er Methode makeSound des NullAnimals eine custom exception werfen:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NullAnimal</span> <span class="kd">implements</span> <span class="n">Animal</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">makeSound</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">NullAnimalSoundException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">throw</span> <span class="k">new</span> <span class="n">NullAnimalSoundException</span><span class="o">(</span><span class="s">&#34;A NullAnimal cannot make any sound!&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>In this situation you might ask yourself: &ldquo;Doesn&rsquo;t a null object just delay the failure to a later point in the code?&rdquo;. And the answer is: Yes, definately! In this case we just delay the moment when the exception is thrown. But the advantage here is, that we as software engineers can &ldquo;control&rdquo; the process in this way. And we can throw meaningful exceptions on our own. Exceptions that contain better information on the failure scenario.</p>
<p><strong>⚠️ Using Optionals is not an alternative ⚠️</strong></p>
<p>In Yegor&rsquo;s opinion, the use of <code>java.util.Optional</code> is not a solution at all.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">){</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span><span class="o">(</span><span class="n">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">new</span> <span class="n">Optional</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="k">new</span> <span class="n">Optional</span><span class="o">(</span><span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">));</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">opt</span> <span class="o">=</span> <span class="n">getByName</span><span class="o">(</span><span class="s">&#34;Jeffrey&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span><span class="o">(</span><span class="n">opt</span><span class="o">.</span><span class="na">has</span><span class="o">()){</span>
</span></span><span class="line"><span class="cl">    <span class="n">opt</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">salary</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">print</span> <span class="s">&#34;sorry&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>An Optional is kind of a container including one or zero elements.</p>
<p>Using Optionals is not a good idea. Why? Because it is not a solution for null references. It is the same as null references. The optional container is not an Object by itself. It is just a temporary memory structure which holds a real object. You still have to check if the optional contains an employee or if it has no employee. It is something that is presented as the solution of the null reference problem but actually it is not. Es verschiebt das problem nur an einen späteren Ort im Code.</p>
<p>To sum up:
However in most situations probably Alternative#1 is the best solution: just throwing an exception immediately.
However the first two options (Custom Exceptions and Null-Objects) are the perfect solutions to the null reference problem. In most scenarios, just throwing a custom exception would be the best way to deal with it.</p>
<p>what does &ldquo;Null-Safe&rdquo; mean?</p>
<p>Kotlin hat zumindest das Problem versucht zu lösen indem Variablen Nullable oder nicht nullable sein können. Durch das Fragezeichen sieht man dann sofort welchem Objekt man trauen kann und welchem Objekt man nicht trauen kann.</p>
<h2 id="refutation-of-the-counterarguments">
  Refutation of the counterarguments
  <a class="heading-link" href="#refutation-of-the-counterarguments">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Counter Argument #1</p>
<p>Some classes are not suitable for making null object. for example the string class. it is final. When you have a method that is supposed to return a string, then you have no option to return a null class. Like a null string or something like that. In this case you have to either return a string or something else.</p>
<p>Answer: This is a problem. It is not possible to use null objects everywhere. but if it is not possible - make it possible. for instance with a wrapper. You could wrap/decorate the String class. Introduce your own class &ldquo;Text&rdquo; for instance. For the representation of Null you could use your NoText class and for existing texts you could use the normal Text class.
But never ever use Null. Just because you could use null it does not mean that you have to do it. Dont let the designers of the java language change your way to think about objects and clean code. Even if java encourage you to use null - dont do it. Be stronger than java!</p>
<p>Counter Argument #2
Null is fast and exceptions are slow (Regarding code performance)</p>
<p>So the argument is that the first code snippet is way less performant than the second code snippet.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">try</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Employee</span> <span class="n">jeff</span> <span class="o">=</span> <span class="n">getByName</span><span class="o">(</span><span class="s">&#34;Jeffrey&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">print</span> <span class="n">jeff</span><span class="o">.</span><span class="na">salary</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">EmployeeNotFoundException</span> <span class="n">ex</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">print</span> <span class="s">&#34;no jeffrey here&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Employee</span> <span class="n">jeff</span> <span class="o">=</span> <span class="n">getByName</span><span class="o">(</span><span class="s">&#34;Jeffrey&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span><span class="o">(</span><span class="n">jeff</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">print</span> <span class="s">&#34;no jeffrey here&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">print</span> <span class="n">jeff</span><span class="o">.</span><span class="na">salary</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>Answer:
That is true. Every exception thrown is a lot of effort for the compiler/runtime. To collect information about what was the cause of the exception, where it was thrown, to build the stack trace, to prepare this information, to stop the program execution, to go to the exceptional flow, &hellip;</p>
<p>However the speed of the application is way less important of a modern software than the maintainability of it.</p>
<p>That is also exactly the thing that the Clean Architecture Book taught me. It is way more important to have a software that is easy to maintain, easy to understand, easy to form, easy to adapt, clean coded than the performance.</p>
<p>Using null is in most cases way faster than using exceptions. Using null will make the life of the computer more easy but it makes the life of the developer more harder and complexer. For companies it costs way more money to deal with an unmaintainable application than to buy new hardware resources that are more efficient/performant.</p>
<p>Counter Argument #4: Warum eine eigene Exception werfen wenn wir auch gleich die Nullpointerexception auftreten lassen können? Kommt ja auf das selbe raus, oder?</p>
<p>Antwort: Nein!
But whats the difference between a nullpointer exception raised by the system or a EmployeeNotFoundException thrown by us manually? There is a big dirreferenc ebecause the nullpointerexception is thrown by the machine by the jvm which is outside of our developer scope which means we cant control it. But the EmployeeNotFoundException is thrown by our objects so we are in charge, we can control it, we encapsulate this behaviour. Our objects control it and not the runtime environment. The EmployeeNotFoundException can contain a custom error message written by me which is alo important for understanding the whole situation. But it is important that you should not control the flow via exceptions! This is a trap that developers often fall for.</p>
<hr>
<p>So do I now have to define a null object for each domain entity in my system?</p>
<p>Yegor says: yes in some cases we have that and in some not. It depends on the situation. There may be scenarios where you dont need a null representation of an object because it is always there.</p>
<p>It is a disease in the entire application. If we allow it to enter our software, then it grows and eventually will infect the entire code.
There is only black and white. There is no grey color in between. If you use null, then the code is wrong and needs to be refactored. If you do not use null, then the code is clean.</p>
<p><a href="https://en.wikipedia.org/wiki/Tony_Hoare"  class="external-link" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Tony_Hoare</a></p>
<p><a href="https://hackernoon.com/null-the-billion-dollar-mistake-8t5z32d6"  class="external-link" target="_blank" rel="noopener">https://hackernoon.com/null-the-billion-dollar-mistake-8t5z32d6</a></p>
<p><a href="https://medium.com/madhash/how-null-references-became-the-billion-dollar-mistake-bcf0c0cc72ef"  class="external-link" target="_blank" rel="noopener">https://medium.com/madhash/how-null-references-became-the-billion-dollar-mistake-bcf0c0cc72ef</a></p>
<p><a href="https://hinchman-amanda.medium.com/null-pointer-references-the-billion-dollar-mistake-1e616534d485"  class="external-link" target="_blank" rel="noopener">https://hinchman-amanda.medium.com/null-pointer-references-the-billion-dollar-mistake-1e616534d485</a></p>
<p><a href="https://en.wikipedia.org/wiki/Null_object_pattern"  class="external-link" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Null_object_pattern</a></p>
<p>Zusammenfassung aus diesem Video schreiben:
<a href="https://www.youtube.com/watch?v=o3aNJX7AP3M"  class="external-link" target="_blank" rel="noopener">https://www.youtube.com/watch?v=o3aNJX7AP3M</a></p>
<p>The billion dollar mistake (Tony Hoare)
<a href="https://www.youtube.com/watch?v=YYkOWzrO3xg"  class="external-link" target="_blank" rel="noopener">https://www.youtube.com/watch?v=YYkOWzrO3xg</a></p>
<p>Article:
<a href="https://www.yegor256.com/2014/05/13/why-null-is-bad.html"  class="external-link" target="_blank" rel="noopener">https://www.yegor256.com/2014/05/13/why-null-is-bad.html</a></p>
<p><a href="https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html"  class="external-link" target="_blank" rel="noopener">https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html</a></p>
<p><a href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/"  class="external-link" target="_blank" rel="noopener">https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/</a></p>
<p><a href="https://web.archive.org/web/20090628071208/http://qconlondon.com/london-2009/speaker/Tony&#43;Hoare"  class="external-link" target="_blank" rel="noopener">https://web.archive.org/web/20090628071208/http://qconlondon.com/london-2009/speaker/Tony+Hoare</a></p>
<p><a href="https://en.wikipedia.org/wiki/Null_object_pattern#Java"  class="external-link" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Null_object_pattern#Java</a></p>
<p><a href="https://www.geeksforgeeks.org/null-object-design-pattern/"  class="external-link" target="_blank" rel="noopener">https://www.geeksforgeeks.org/null-object-design-pattern/</a></p>

  </article>
</section>

  

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2024
     Johannes Gerstbauer 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
